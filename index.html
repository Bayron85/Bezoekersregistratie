<!DOCTYPE html>
<html>
<head>
<style>
iframe {
  width:		100%;
  height:		100%;
  border:		none;
  outline:		none;
  overflow:		hidden;
  display:		block;
  background:	transparent;
  z-index: 0;  
}
button {
  position: absolute;
  top: 2px;
  left: 2px;
  z-index: 10;
  padding: 10px 20px;
  font-size: 2.4rem;
  color: #FFFFFF;
  background-color: #756A65;
  cursor: pointer;
  border: 0.0625rem solid transparent;
  font-weight: 600;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-right-radius: 4px;
  border-bottom-left-radius: 4px;
}

button:hover {
	background-color: #5B534F;
  	color: #EFEEED;
}
</style>
</head>

<body onload="checkCookie()" style="margin:0;padding:0;overflow:hidden;">

<iframe name="ifrVisitorRegistration" style="position:absolute;top:0;left:0;width:100%;height:100%;border:none;" allowfullscreen webkitallowfullscreen mozallowfullscreen msallowfullscreen> </iframe>
<button type="button" onclick="deleteCookie('cUser');">Opgeslagen Gegevens Wissen</button>
</body>
<script>
function setCookie(cname,cvalue,exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires=" + d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function checkCookie() {
	var userLang = navigator.language || navigator.userLanguage; 
alert ("The language is: " + userLang);


  let user = getCookie("cUser");
  if (user != "") {
    changeUrl(user)
  } else {
     user = prompt("Please enter your name:","");
     if (user != "" && user != null) {
       setCookie("cUser", user, 365);
       changeUrl(user);
     }
  }
}

function deleteCookie(cname) {
  document.cookie = cname + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
  alert("Cookies gewist.");
  location.replace('https://bayron85.github.io/Bezoekersregistratie/');
}

function changeUrl(user) {
//alert("Welcome again " + user);
    var site = "https://forms.office.com/Pages/ResponsePage.aspx?id=ywyDZZ504kyYh6YE7U14LtXtwJ7GcThLnmpKZ_pMA8lUMFo5MDJKUlA4S08yUjdLTU9CNkhWVTJXVS4u&r01b953a9917c4a25aaa3ef7ebbb3d364=VOORNAAM&r6518a57c214949849e5edf358e5704d8="+user+"&r1be4e3ea76f9416cad65f84e718880ef=BEDRIJF&re49fd0ad20d34430b025601c16a9d57e=AFSPRAAK%20MET&r21fd90a5337d4eaa8d962be8942e194c=GSM&r315d8eb127c640588a49c28f0cc1eb5d=NUMMERPLAAT&embed=true";
    document.getElementsByName('ifrVisitorRegistration')[0].src = site;
}
</script>
</html>